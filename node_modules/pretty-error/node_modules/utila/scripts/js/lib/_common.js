var common;

module.exports = common = {

  /*
  	Checks to see if o is an object, and it isn't an instance
  	of some class.
   */
  isBareObject: function(o) {
    if ((o != null) && o.constructor === Object) {
      return true;
    }
    return false;
  },

  /*
  	Returns type of an object, including:
  	undefined, null, string, number, array,
  	arguments, element, textnode, whitespace, and object
   */
  typeOf: function(item) {
    var _ref;
    if (item === null) {
      return 'null';
    }
    if (typeof item !== 'object') {
      return typeof item;
    }
    if (Array.isArray(item)) {
      return 'array';
    }
    if (item.nodeName) {
      if (item.nodeType === 1) {
        return 'element';
      }
      if (item.nodeType === 3) {
        return (_ref = /\S/.test(item.nodeValue)) != null ? _ref : {
          'textnode': 'whitespace'
        };
      }
    } else if (typeof item.length === 'number') {
      if (item.callee) {
        return 'arguments';
      }
    }
    return typeof item;
  },
  clone: function(item, includePrototype) {
    if (includePrototype == null) {
      includePrototype = false;
    }
    switch (common.typeOf(item)) {
      case 'array':
        return common._cloneArray(item, includePrototype);
      case 'object':
        return common._cloneObject(item, includePrototype);
      default:
        return item;
    }
  },

  /*
  	Deep clone of an object.
  	From MooTools
   */
  _cloneObject: function(o, includePrototype) {
    var clone, key;
    if (includePrototype == null) {
      includePrototype = false;
    }
    if (common.isBareObject(o)) {
      clone = {};
      for (key in o) {
        clone[key] = common.clone(o[key], includePrototype);
      }
      return clone;
    } else {
      if (!includePrototype) {
        return o;
      }
      if (o instanceof Function) {
        return o;
      }
      clone = Object.create(o.constructor.prototype);
      for (key in o) {
        if (o.hasOwnProperty(key)) {
          clone[key] = common.clone(o[key], includePrototype);
        }
      }
      return clone;
    }
  },

  /*
  	Deep clone of an array.
  	From MooTools
   */
  _cloneArray: function(a, includePrototype) {
    var clone, i;
    if (includePrototype == null) {
      includePrototype = false;
    }
    i = a.length;
    clone = new Array(i);
    while (i--) {
      clone[i] = common.clone(a[i], includePrototype);
    }
    return clone;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX2NvbW1vbi5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcbGliXFxfY29tbW9uLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLE1BQUE7O0FLQUEsTUtBTSxDS0FDLE9LQVAsR0tBaUIsTUtBQSxHS0VoQjtBS0FBO0FLQUE7OztLS0FBO0FLQUEsRUtJQSxZS0FBLEVLQWMsU0tBQyxDS0FELEdLQUE7QUtFYixJS0FBLElLQUcsV0tBQSxJS0FPLENLQUMsQ0tBQyxXS0FGLEtLQWlCLE1LQTNCO0FLRUMsYUtBTyxJS0FQLENLRkQ7S0tBQTtXS0lBLE1LTmE7RUtBQSxDS0pkO0FLWUE7QUtBQTs7OztLS1pBO0FLQUEsRUtpQkEsTUtBQSxFS0FRLFNLQUMsSUtBRCxHS0FBO0FLRVAsUUtBQSxJS0FBO0FLQUEsSUtBQSxJS0FpQixJS0FBLEtLQVEsSUtBekI7QUtBQSxhS0FPLE1LQVAsQ0tBQTtLS0FBO0FLRUEsSUtBQSxJS0FzQixNS0FBLENLQU8sSUtBUCxLS0FpQixRS0F2QztBS0FBLGFLQU8sTUtBQSxDS0FPLElLQWQsQ0tBQTtLS0ZBO0FLSUEsSUtBQSxJS0FrQixLS0FLLENLQUMsT0tBTixDS0FjLElLQWQsQ0tBbEI7QUtBQSxhS0FPLE9LQVAsQ0tBQTtLS0pBO0FLUUEsSUtBQSxJS0FHLElLQUksQ0tBQyxRS0FSO0FLRUMsTUtBQSxJS0FHLElLQUksQ0tBQyxRS0FMLEtLQWlCLENLQXBCO0FLQTJCLGVLQU8sU0tBUCxDS0EzQjtPS0FBO0FLQ0EsTUtBQSxJS0FHLElLQUksQ0tBQyxRS0FMLEtLQWlCLENLQXBCO0FLQTJCLG1FS0FxQztBS0FBLFVLQUEsVUtBQSxFS0FhLFlLQWI7U0tBckMsQ0tBM0I7T0tIRDtLS0FBLE1LS0ssSUtBRyxNS0FBLENLQU8sSUtBSSxDS0FDLE1LQVosS0tBc0IsUUtBekI7QUtFSixNS0FBLElLQUcsSUtBSSxDS0FDLE1LQVI7QUtBb0IsZUtBTyxXS0FQLENLQXBCO09LRkk7S0tiTDtBS2lCQSxXS0FPLE1LQUEsQ0tBTyxJS0FkLENLbkJPO0VLQUEsQ0tqQlI7QUtBQSxFS3dDQSxLS0FBLEVLQU8sU0tBQyxJS0FELEVLQU8sZ0JLQVAsR0tBQTs7TUtBTyxtQktBbUI7S0tFaEM7QUtBQSxZS0FPLE1LQU0sQ0tBQyxNS0FQLENLQWMsSUtBZCxDS0FQO0FLQUEsV0tFTSxPS0ZOO0FLRW1CLGVLQU8sTUtBTSxDS0FDLFdLQVAsQ0tBbUIsSUtBbkIsRUtBeUIsZ0JLQXpCLENLQVAsQ0tGbkI7QUtBQSxXS0lNLFFLSk47QUtJb0IsZUtBTyxNS0FNLENLQUMsWUtBUCxDS0FvQixJS0FwQixFS0EwQixnQktBMUIsQ0tBUCxDS0pwQjtBS0FBO0FLTU0sZUtBTyxJS0FQLENLTk47QUtBQSxLS0ZNO0VLQUEsQ0t4Q1A7QUtrREE7QUtBQTs7O0tLbERBO0FLQUEsRUtzREEsWUtBQSxFS0FjLFNLQUMsQ0tBRCxFS0FJLGdCS0FKLEdLQUE7QUtFYixRS0FBLFVLQUE7O01LRmlCLG1CS0FtQjtLS0VwQztBS0FBLElLQUEsSUtBRyxNS0FNLENLQUMsWUtBUCxDS0FvQixDS0FwQixDS0FIO0FLRUMsTUtBQSxLS0FBLEdLQVEsRUtBUixDS0FBO0FLRUEsV0tBQSxRS0FBLEdLQUE7QUtFQyxRS0FBLEtLQU0sQ0tBQSxHS0FBLENLQU4sR0tBYSxNS0FNLENLQUMsS0tBUCxDS0FhLENLQUUsQ0tBQSxHS0FBLENLQWYsRUtBcUIsZ0JLQXJCLENLQWIsQ0tGRDtBS0FBLE9LRkE7QUtNQSxhS0FPLEtLQVAsQ0tSRDtLS0FBLE1LQUE7QUtZQyxNS0FBLElLQUEsQ0tBZ0IsZ0JLQWhCO0FLQUEsZUtBTyxDS0FQLENLQUE7T0tBQTtBS0VBLE1LQUEsSUtBWSxDS0FBLFlLQWEsUUtBekI7QUtBQSxlS0FPLENLQVAsQ0tBQTtPS0ZBO0FLQUEsTUtJQSxLS0FBLEdLQVEsTUtBTSxDS0FDLE1LQVAsQ0tBYyxDS0FDLENLQUMsV0tBVyxDS0FDLFNLQTVCLENLSlIsQ0tBQTtBS01BLFdLQUEsUUtBQSxHS0FBO0FLRUMsUUtBQSxJS0FHLENLQUMsQ0tBQyxjS0FGLENLQWlCLEdLQWpCLENLQUg7QUtFQyxVS0FBLEtLQU0sQ0tBQSxHS0FBLENLQU4sR0tBYSxNS0FNLENLQUMsS0tBUCxDS0FhLENLQUUsQ0tBQSxHS0FBLENLQWYsRUtBcUIsZ0JLQXJCLENLQWIsQ0tGRDtTS0ZEO0FLQUEsT0tOQTthS1lBLE1LeEJEO0tLRmE7RUtBQSxDS3REZDtBS2tGQTtBS0FBOzs7S0tsRkE7QUtBQSxFS3NGQSxXS0FBLEVLQWEsU0tBQyxDS0FELEVLQUksZ0JLQUosR0tBQTtBS0VaLFFLQUEsUUtBQTs7TUtGZ0IsbUJLQW1CO0tLRW5DO0FLQUEsSUtBQSxDS0FBLEdLQUksQ0tBQyxDS0FDLE1LQU4sQ0tBQTtBS0FBLElLRUEsS0tBQSxHS0FZLElLQUEsS0tBQSxDS0FNLENLQU4sQ0tGWixDS0FBO0FLSUEsV0tBTSxDS0FBLEVLQU4sR0tBQTtBS0VDLE1LQUEsS0tBTSxDS0FBLENLQUEsQ0tBTixHS0FXLE1LQU0sQ0tBQyxLS0FQLENLQWEsQ0tBRSxDS0FBLENLQUEsQ0tBZixFS0FtQixnQktBbkIsQ0tBWCxDS0ZEO0lLQUEsQ0tKQTtXS1FBLE1LVlk7RUtBQSxDS3RGYjtDQUZELENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGFycmF5ID1cblxuXHQjIyNcblx0VHJpZXMgdG8gdHVybiBhbnl0aGluZyBpbnRvIGFuIGFycmF5LlxuXHQjIyNcblx0ZnJvbTogKHIpIC0+XG5cblx0XHRBcnJheTo6c2xpY2UuY2FsbCByXG5cblx0IyMjXG5cdENsb25lIG9mIGFuIGFycmF5LiBQcm9wZXJ0aWVzIHdpbGwgYmUgc2hhbGxvdyBjb3BpZXMuXG5cdCMjI1xuXHRzaW1wbGVDbG9uZTogKGEpIC0+XG5cblx0XHRhLnNsaWNlIDBcblxuXHRzaGFsbG93RXF1YWw6IChhMSwgYTIpIC0+XG5cblx0XHRyZXR1cm4gbm8gdW5sZXNzIEFycmF5LmlzQXJyYXkoYTEpIGFuZCBBcnJheS5pc0FycmF5KGEyKSBhbmQgYTEubGVuZ3RoIGlzIGEyLmxlbmd0aFxuXG5cdFx0Zm9yIHZhbCwgaSBpbiBhMVxuXG5cdFx0XHRyZXR1cm4gbm8gdW5sZXNzIGEyW2ldIGlzIHZhbFxuXG5cdFx0eWVzXG5cblx0cGx1Y2s6IChhLCBpKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBpbmRleCA+IGlcblxuXHRcdFx0XHRhW2luZGV4IC0gMV0gPSBhW2luZGV4XVxuXG5cdFx0YS5sZW5ndGggPSBhLmxlbmd0aCAtIDFcblxuXHRcdGFcblxuXHRwbHVja0l0ZW06IChhLCBpdGVtKSAtPlxuXG5cdFx0cmV0dXJuIGEgaWYgYS5sZW5ndGggPCAxXG5cblxuXHRcdHJlbW92ZWQgPSAwXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgdmFsdWUgaXMgaXRlbVxuXG5cdFx0XHRcdHJlbW92ZWQrK1xuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGlmIHJlbW92ZWQgaXNudCAwXG5cblx0XHRcdFx0YVtpbmRleCAtIHJlbW92ZWRdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSByZW1vdmVkIGlmIHJlbW92ZWQgPiAwXG5cblx0XHRhXG5cblx0cGx1Y2tPbmVJdGVtOiAoYSwgaXRlbSkgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVhY2hlZCA9IG5vXG5cblx0XHRmb3IgdmFsdWUsIGluZGV4IGluIGFcblxuXHRcdFx0aWYgbm90IHJlYWNoZWRcblxuXHRcdFx0XHRpZiB2YWx1ZSBpcyBpdGVtXG5cblx0XHRcdFx0XHRyZWFjaGVkID0geWVzXG5cblx0XHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0YVtpbmRleCAtIDFdID0gYVtpbmRleF1cblxuXHRcdGEubGVuZ3RoID0gYS5sZW5ndGggLSAxIGlmIHJlYWNoZWRcblxuXHRcdGFcblxuXHRwbHVja0J5Q2FsbGJhY2s6IChhLCBjYikgLT5cblxuXHRcdHJldHVybiBhIGlmIGEubGVuZ3RoIDwgMVxuXG5cdFx0cmVtb3ZlZCA9IDBcblxuXHRcdGZvciB2YWx1ZSwgaW5kZXggaW4gYVxuXG5cdFx0XHRpZiBjYiB2YWx1ZSwgaW5kZXhcblxuXHRcdFx0XHRyZW1vdmVkKytcblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRpZiByZW1vdmVkIGlzbnQgMFxuXG5cdFx0XHRcdGFbaW5kZXggLSByZW1vdmVkXSA9IGFbaW5kZXhdXG5cblx0XHRpZiByZW1vdmVkID4gMFxuXG5cdFx0XHRhLmxlbmd0aCA9IGEubGVuZ3RoIC0gcmVtb3ZlZFxuXG5cdFx0YVxuXG5cdHBsdWNrTXVsdGlwbGU6IChhcnJheSwgaW5kZXhlc1RvUmVtb3ZlKSAtPlxuXG5cdFx0cmV0dXJuIGFycmF5IGlmIGFycmF5Lmxlbmd0aCA8IDFcblxuXHRcdHJlbW92ZWRTb0ZhciA9IDBcblxuXHRcdGluZGV4ZXNUb1JlbW92ZS5zb3J0KClcblxuXHRcdGZvciBpIGluIGluZGV4ZXNUb1JlbW92ZVxuXG5cdFx0XHRAcGx1Y2sgYXJyYXksIGkgLSByZW1vdmVkU29GYXJcblxuXHRcdFx0cmVtb3ZlZFNvRmFyKytcblxuXHRcdGFycmF5XG5cblx0aW5qZWN0QnlDYWxsYmFjazogKGEsIHRvSW5qZWN0LCBzaG91bGRJbmplY3QpIC0+XG5cblx0XHR2YWxBID0gbnVsbFxuXG5cdFx0dmFsQiA9IG51bGxcblxuXHRcdGxlbiA9IGEubGVuZ3RoXG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cblx0XHRmb3IgdmFsLCBpIGluIGFcblxuXHRcdFx0dmFsQSA9IHZhbEJcblxuXHRcdFx0dmFsQiA9IHZhbFxuXG5cdFx0XHRpZiBzaG91bGRJbmplY3QgdmFsQSwgdmFsQiwgdG9JbmplY3RcblxuXHRcdFx0XHRyZXR1cm4gYS5zcGxpY2UgaSwgMCwgdG9JbmplY3RcblxuXHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0YVxuXG5cdGluamVjdEluSW5kZXg6IChhLCBpbmRleCwgdG9JbmplY3QpIC0+XG5cblx0XHRsZW4gPSBhLmxlbmd0aFxuXG5cdFx0aSA9IGluZGV4XG5cblx0XHRpZiBsZW4gPCAxXG5cblx0XHRcdGEucHVzaCB0b0luamVjdFxuXG5cdFx0XHRyZXR1cm4gYVxuXG5cdFx0dG9QdXQgPSB0b0luamVjdFxuXG5cdFx0dG9QdXROZXh0ID0gbnVsbFxuXG5cdFx0YGZvcig7IGkgPD0gbGVuOyBpKyspe1xuXG5cdFx0XHR0b1B1dE5leHQgPSBhW2ldO1xuXG5cdFx0XHRhW2ldID0gdG9QdXQ7XG5cblx0XHRcdHRvUHV0ID0gdG9QdXROZXh0O1xuXG5cdFx0fWBcblxuXHRcdCMgYVtpXSA9IHRvUHV0XG5cblx0XHRudWxsIiwibW9kdWxlLmV4cG9ydHMgPSBjbGFzc2ljID0ge31cblxuIyBMaXR0bGUgaGVscGVyIGZvciBtaXhpbnMgZnJvbSBDb2ZmZWVTY3JpcHQgRkFRLFxuIyBjb3VydGVzeSBvZiBTZXRoYXVydXMgKGh0dHA6Ly9naXRodWIuY29tL3NldGhhdXJ1cylcbmNsYXNzaWMuaW1wbGVtZW50ID0gKG1peGlucy4uLiwgY2xhc3NSZWZlcmVuY2UpIC0+XG5cblx0Zm9yIG1peGluIGluIG1peGluc1xuXG5cdFx0Y2xhc3NQcm90byA9IGNsYXNzUmVmZXJlbmNlOjpcblxuXHRcdGZvciBtZW1iZXIgb2YgbWl4aW46OlxuXG5cdFx0XHR1bmxlc3MgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBjbGFzc1Byb3RvLCBtZW1iZXJcblxuXHRcdFx0XHRkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBtaXhpbjo6LCBtZW1iZXJcblxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkgY2xhc3NQcm90bywgbWVtYmVyLCBkZXNjXG5cblx0Y2xhc3NSZWZlcmVuY2VcblxuY2xhc3NpYy5taXggPSAobWl4aW5zLi4uLCBjbGFzc1JlZmVyZW5jZSkgLT5cblxuXHRjbGFzc1Byb3RvID0gY2xhc3NSZWZlcmVuY2U6OlxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzID0gW11cblxuXHRjbGFzc1JlZmVyZW5jZS5fX2FwcGx5Q2xvbmVyc0ZvciA9IChpbnN0YW5jZSwgYXJncyA9IG51bGwpIC0+XG5cblx0XHRmb3IgY2xvbmVyIGluIGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5DbG9uZXJzXG5cblx0XHRcdGNsb25lci5hcHBseSBpbnN0YW5jZSwgYXJnc1xuXG5cdFx0cmV0dXJuXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19taXhpbkluaXRpYWxpemVycyA9IFtdXG5cblx0Y2xhc3NSZWZlcmVuY2UuX19pbml0TWl4aW5zRm9yID0gKGluc3RhbmNlLCBhcmdzID0gbnVsbCkgLT5cblxuXHRcdGZvciBpbml0aWFsaXplciBpbiBjbGFzc1JlZmVyZW5jZS5fX21peGluSW5pdGlhbGl6ZXJzXG5cblx0XHRcdGluaXRpYWxpemVyLmFwcGx5IGluc3RhbmNlLCBhcmdzXG5cblx0XHRyZXR1cm5cblxuXHRjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnMgPSBbXVxuXG5cdGNsYXNzUmVmZXJlbmNlLl9fYXBwbHlRdWl0dGVyc0ZvciA9IChpbnN0YW5jZSwgYXJncyA9IG51bGwpIC0+XG5cblx0XHRmb3IgcXVpdHRlciBpbiBjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnNcblxuXHRcdFx0cXVpdHRlci5hcHBseSBpbnN0YW5jZSwgYXJnc1xuXG5cdFx0cmV0dXJuXG5cblx0Zm9yIG1peGluIGluIG1peGluc1xuXG5cdFx0dW5sZXNzIG1peGluLmNvbnN0cnVjdG9yIGluc3RhbmNlb2YgRnVuY3Rpb25cblxuXHRcdFx0dGhyb3cgRXJyb3IgXCJNaXhpbiBzaG91bGQgYmUgYSBmdW5jdGlvblwiXG5cblx0XHRmb3IgbWVtYmVyIG9mIG1peGluOjpcblxuXHRcdFx0aWYgbWVtYmVyLnN1YnN0cigwLCAxMSkgaXMgJ19faW5pdE1peGluJ1xuXG5cdFx0XHRcdGNsYXNzUmVmZXJlbmNlLl9fbWl4aW5Jbml0aWFsaXplcnMucHVzaCBtaXhpbjo6W21lbWJlcl1cblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRlbHNlIGlmIG1lbWJlci5zdWJzdHIoMCwgMTEpIGlzICdfX2Nsb25lckZvcidcblxuXHRcdFx0XHRjbGFzc1JlZmVyZW5jZS5fX21peGluQ2xvbmVycy5wdXNoIG1peGluOjpbbWVtYmVyXVxuXG5cdFx0XHRcdGNvbnRpbnVlXG5cblx0XHRcdGVsc2UgaWYgbWVtYmVyLnN1YnN0cigwLCAxMikgaXMgJ19fcXVpdHRlckZvcidcblxuXHRcdFx0XHRjbGFzc1JlZmVyZW5jZS5fX21peGluUXVpdHRlcnMucHVzaCBtaXhpbjo6W21lbWJlcl1cblxuXHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHR1bmxlc3MgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBjbGFzc1Byb3RvLCBtZW1iZXJcblxuXHRcdFx0XHRkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciBtaXhpbjo6LCBtZW1iZXJcblxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkgY2xhc3NQcm90bywgbWVtYmVyLCBkZXNjXG5cblx0Y2xhc3NSZWZlcmVuY2UiLCJfY29tbW9uID0gcmVxdWlyZSAnLi9fY29tbW9uJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9iamVjdCA9XG5cblx0aXNCYXJlT2JqZWN0OiBfY29tbW9uLmlzQmFyZU9iamVjdC5iaW5kIF9jb21tb25cblxuXHQjIyNcblx0aWYgb2JqZWN0IGlzIGFuIGluc3RhbmNlIG9mIGEgY2xhc3Ncblx0IyMjXG5cdGlzSW5zdGFuY2U6ICh3aGF0KSAtPlxuXG5cdFx0bm90IEBpc0JhcmVPYmplY3Qgd2hhdFxuXG5cdCMjI1xuXHRBbGlhcyB0byBfY29tbW9uLnR5cGVPZlxuXHQjIyNcblx0dHlwZU9mOiBfY29tbW9uLnR5cGVPZi5iaW5kIF9jb21tb25cblxuXHQjIyNcblx0QWxpYXMgdG8gX2NvbW1vbi5jbG9uZVxuXHQjIyNcblx0Y2xvbmU6IF9jb21tb24uY2xvbmUuYmluZCBfY29tbW9uXG5cblx0IyMjXG5cdEVtcHRpZXMgYW4gb2JqZWN0IG9mIGl0cyBwcm9wZXJ0aWVzLlxuXHQjIyNcblx0ZW1wdHk6IChvKSAtPlxuXG5cdFx0Zm9yIHByb3Agb2Ygb1xuXG5cdFx0XHRkZWxldGUgb1twcm9wXSBpZiBvLmhhc093blByb3BlcnR5IHByb3BcblxuXHRcdG9cblxuXHQjIyNcblx0RW1wdGllcyBhbiBvYmplY3QuIERvZXNuJ3QgY2hlY2sgZm9yIGhhc093blByb3BlcnR5LCBzbyBpdCdzIGEgdGlueVxuXHRiaXQgZmFzdGVyLiBVc2UgaXQgZm9yIHBsYWluIG9iamVjdHMuXG5cdCMjI1xuXHRmYXN0RW1wdHk6IChvKSAtPlxuXG5cdFx0ZGVsZXRlIG9bcHJvcGVydHldIGZvciBwcm9wZXJ0eSBvZiBvXG5cblx0XHRvXG5cblx0IyMjXG5cdE92ZXJyaWRlcyB2YWx1ZXMgZm9tciBgbmV3VmFsdWVzYCBvbiBgYmFzZWAsIGFzIGxvbmcgYXMgdGhleVxuXHRhbHJlYWR5IGV4aXN0IGluIGJhc2UuXG5cdCMjI1xuXHRvdmVycmlkZU9udG86IChiYXNlLCBuZXdWYWx1ZXMpIC0+XG5cblx0XHRyZXR1cm4gYmFzZSBpZiBub3QgQGlzQmFyZU9iamVjdChuZXdWYWx1ZXMpIG9yIG5vdCBAaXNCYXJlT2JqZWN0KGJhc2UpXG5cblx0XHRmb3Iga2V5LCBvbGRWYWwgb2YgYmFzZVxuXG5cdFx0XHRuZXdWYWwgPSBuZXdWYWx1ZXNba2V5XVxuXG5cdFx0XHRjb250aW51ZSBpZiBuZXdWYWwgaXMgdW5kZWZpbmVkXG5cblx0XHRcdGlmIHR5cGVvZiBuZXdWYWwgaXNudCAnb2JqZWN0JyBvciBAaXNJbnN0YW5jZSBuZXdWYWxcblxuXHRcdFx0XHRiYXNlW2tleV0gPSBAY2xvbmUgbmV3VmFsXG5cblx0XHRcdCMgbmV3VmFsIGlzIGEgcGxhaW4gb2JqZWN0XG5cdFx0XHRlbHNlXG5cblx0XHRcdFx0aWYgdHlwZW9mIG9sZFZhbCBpc250ICdvYmplY3QnIG9yIEBpc0luc3RhbmNlIG9sZFZhbFxuXG5cdFx0XHRcdFx0YmFzZVtrZXldID0gQGNsb25lIG5ld1ZhbFxuXG5cdFx0XHRcdGVsc2VcblxuXHRcdFx0XHRcdEBvdmVycmlkZU9udG8gb2xkVmFsLCBuZXdWYWxcblx0XHRiYXNlXG5cblx0IyMjXG5cdFRha2VzIGEgY2xvbmUgb2YgJ2Jhc2UnIGFuZCBydW5zICNvdmVycmlkZU9udG8gb24gaXRcblx0IyMjXG5cdG92ZXJyaWRlOiAoYmFzZSwgbmV3VmFsdWVzKSAtPlxuXG5cdFx0QG92ZXJyaWRlT250byBAY2xvbmUoYmFzZSksIG5ld1ZhbHVlc1xuXG5cdGFwcGVuZDogKGJhc2UsIHRvQXBwZW5kKSAtPlxuXG5cdFx0QGFwcGVuZE9udG8gQGNsb25lKGJhc2UpLCB0b0FwcGVuZFxuXG5cdCMgRGVlcCBhcHBlbmRzIHZhbHVlcyBmcm9tIGB0b0FwcGVuZGAgdG8gYGJhc2VgXG5cdGFwcGVuZE9udG86IChiYXNlLCB0b0FwcGVuZCkgLT5cblxuXHRcdHJldHVybiBiYXNlIGlmIG5vdCBAaXNCYXJlT2JqZWN0KHRvQXBwZW5kKSBvciBub3QgQGlzQmFyZU9iamVjdChiYXNlKVxuXG5cdFx0Zm9yIG93biBrZXksIG5ld1ZhbCBvZiB0b0FwcGVuZFxuXG5cdFx0XHRjb250aW51ZSB1bmxlc3MgbmV3VmFsIGlzbnQgdW5kZWZpbmVkXG5cblx0XHRcdGlmIHR5cGVvZiBuZXdWYWwgaXNudCAnb2JqZWN0JyBvciBAaXNJbnN0YW5jZSBuZXdWYWxcblxuXHRcdFx0XHRiYXNlW2tleV0gPSBuZXdWYWxcblxuXHRcdFx0ZWxzZVxuXG5cdFx0XHRcdCMgbmV3VmFsIGlzIGEgYmFyZSBvYmplY3RcblxuXHRcdFx0XHRvbGRWYWwgPSBiYXNlW2tleV1cblxuXHRcdFx0XHRpZiB0eXBlb2Ygb2xkVmFsIGlzbnQgJ29iamVjdCcgb3IgQGlzSW5zdGFuY2Ugb2xkVmFsXG5cblx0XHRcdFx0XHRiYXNlW2tleV0gPSBAY2xvbmUgbmV3VmFsXG5cblx0XHRcdFx0ZWxzZVxuXG5cdFx0XHRcdFx0QGFwcGVuZE9udG8gb2xkVmFsLCBuZXdWYWxcblxuXHRcdGJhc2VcblxuXHQjIEdyb3Vwc1xuXHRncm91cFByb3BzOiAob2JqLCBncm91cHMpIC0+XG5cblx0XHRncm91cGVkID0ge31cblxuXHRcdGZvciBuYW1lLCBkZWZzIG9mIGdyb3Vwc1xuXG5cdFx0XHRncm91cGVkW25hbWVdID0ge31cblxuXHRcdGdyb3VwZWRbJ3Jlc3QnXSA9IHt9XG5cblx0XHRgdG9wOiAvL2Bcblx0XHRmb3Iga2V5LCB2YWwgb2Ygb2JqXG5cblx0XHRcdHNob3VsZEFkZCA9IG5vXG5cblx0XHRcdGZvciBuYW1lLCBkZWZzIG9mIGdyb3Vwc1xuXG5cdFx0XHRcdHVubGVzcyBBcnJheS5pc0FycmF5IGRlZnNcblxuXHRcdFx0XHRcdGRlZnMgPSBbZGVmc11cblxuXHRcdFx0XHRmb3IgZGVmIGluIGRlZnNcblxuXHRcdFx0XHRcdGlmIHR5cGVvZiBkZWYgaXMgJ3N0cmluZydcblxuXHRcdFx0XHRcdFx0aWYga2V5IGlzIGRlZlxuXG5cdFx0XHRcdFx0XHRcdHNob3VsZEFkZCA9IHllc1xuXG5cdFx0XHRcdFx0ZWxzZSBpZiBkZWYgaW5zdGFuY2VvZiBSZWdFeHBcblxuXHRcdFx0XHRcdFx0aWYgZGVmLnRlc3Qga2V5XG5cblx0XHRcdFx0XHRcdFx0c2hvdWxkQWRkID0geWVzXG5cblx0XHRcdFx0XHRlbHNlIGlmIGRlZiBpbnN0YW5jZW9mIEZ1bmN0aW9uXG5cblx0XHRcdFx0XHRcdGlmIGRlZiBrZXlcblxuXHRcdFx0XHRcdFx0XHRzaG91bGRBZGQgPSB5ZXNcblxuXHRcdFx0XHRcdGVsc2VcblxuXHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IgJ0dyb3VwIGRlZmluaXRpb25zIG11c3QgZWl0aGVyXG5cdFx0XHRcdFx0XHRiZSBzdHJpbmdzLCByZWdleGVzLCBvciBmdW5jdGlvbnMuJ1xuXG5cdFx0XHRcdFx0aWYgc2hvdWxkQWRkXG5cblx0XHRcdFx0XHRcdGdyb3VwZWRbbmFtZV1ba2V5XSA9IHZhbFxuXG5cdFx0XHRcdFx0XHRgY29udGludWUgdG9wYFxuXG5cdFx0XHRncm91cGVkWydyZXN0J11ba2V5XSA9IHZhbFxuXG5cdFx0Z3JvdXBlZCIsIm1vZHVsZS5leHBvcnRzID1cclxuXHJcblx0IyBwYWRzIGEgbnVtYmVyIHdpdGggbGVhZGluZyB6ZXJvZXNcclxuXHQjXHJcblx0IyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMDA3Mzc4OC82MDc5OTdcclxuXHRwYWQ6IChuLCB3aWR0aCwgeiA9ICcwJykgLT5cclxuXHJcblx0XHRuID0gbiArICcnXHJcblxyXG5cdFx0aWYgbi5sZW5ndGggPj0gd2lkdGhcclxuXHJcblx0XHRcdG5cclxuXHJcblx0XHRlbHNlXHJcblxyXG5cdFx0XHRuZXcgQXJyYXkod2lkdGggLSBuLmxlbmd0aCArIDEpLmpvaW4oeikgKyBuIiwibW9kdWxlLmV4cG9ydHMgPSB1dGlsYSA9XG5cblx0YXJyYXk6IHJlcXVpcmUgJy4vYXJyYXknXG5cdGNsYXNzaWM6IHJlcXVpcmUgJy4vY2xhc3NpYydcblx0b2JqZWN0OiByZXF1aXJlICcuL29iamVjdCdcblx0c3RyaW5nOiByZXF1aXJlICcuL3N0cmluZyciLCJtb2R1bGUuZXhwb3J0cyA9IGNvbW1vbiA9XG5cblx0IyMjXG5cdENoZWNrcyB0byBzZWUgaWYgbyBpcyBhbiBvYmplY3QsIGFuZCBpdCBpc24ndCBhbiBpbnN0YW5jZVxuXHRvZiBzb21lIGNsYXNzLlxuXHQjIyNcblx0aXNCYXJlT2JqZWN0OiAobykgLT5cblxuXHRcdGlmIG8/IGFuZCBvLmNvbnN0cnVjdG9yIGlzIE9iamVjdFxuXG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXG5cdFx0ZmFsc2VcblxuXHQjIyNcblx0UmV0dXJucyB0eXBlIG9mIGFuIG9iamVjdCwgaW5jbHVkaW5nOlxuXHR1bmRlZmluZWQsIG51bGwsIHN0cmluZywgbnVtYmVyLCBhcnJheSxcblx0YXJndW1lbnRzLCBlbGVtZW50LCB0ZXh0bm9kZSwgd2hpdGVzcGFjZSwgYW5kIG9iamVjdFxuXHQjIyNcblx0dHlwZU9mOiAoaXRlbSkgLT5cblxuXHRcdHJldHVybiAnbnVsbCcgaWYgaXRlbSBpcyBudWxsXG5cblx0XHRyZXR1cm4gdHlwZW9mIGl0ZW0gaWYgdHlwZW9mIGl0ZW0gaXNudCAnb2JqZWN0J1xuXG5cdFx0cmV0dXJuICdhcnJheScgaWYgQXJyYXkuaXNBcnJheSBpdGVtXG5cblx0XHQjIEZyb20gTW9vVG9vbHNcblx0XHQjIC0gZG8gd2UgZXZlbiBuZWVkIHRoaXM/XG5cdFx0aWYgaXRlbS5ub2RlTmFtZVxuXG5cdFx0XHRpZiBpdGVtLm5vZGVUeXBlIGlzIDEgdGhlbiByZXR1cm4gJ2VsZW1lbnQnXG5cdFx0XHRpZiBpdGVtLm5vZGVUeXBlIGlzIDMgdGhlbiByZXR1cm4gKC9cXFMvKS50ZXN0KGl0ZW0ubm9kZVZhbHVlKSA/ICd0ZXh0bm9kZScgOiAnd2hpdGVzcGFjZSdcblxuXHRcdGVsc2UgaWYgdHlwZW9mIGl0ZW0ubGVuZ3RoIGlzICdudW1iZXInXG5cblx0XHRcdGlmIGl0ZW0uY2FsbGVlIHRoZW4gcmV0dXJuICdhcmd1bWVudHMnXG5cblx0XHRyZXR1cm4gdHlwZW9mIGl0ZW1cblxuXHQjIERlZXAgY2xvbmUgb2YgYW55IHZhcmlhYmxlLlxuXHQjIEZyb20gTW9vVG9vbHNcblx0Y2xvbmU6IChpdGVtLCBpbmNsdWRlUHJvdG90eXBlID0gZmFsc2UpIC0+XG5cblx0XHRzd2l0Y2ggY29tbW9uLnR5cGVPZiBpdGVtXG5cblx0XHRcdHdoZW4gJ2FycmF5JyB0aGVuIHJldHVybiBjb21tb24uX2Nsb25lQXJyYXkgaXRlbSwgaW5jbHVkZVByb3RvdHlwZVxuXG5cdFx0XHR3aGVuICdvYmplY3QnIHRoZW4gcmV0dXJuIGNvbW1vbi5fY2xvbmVPYmplY3QgaXRlbSwgaW5jbHVkZVByb3RvdHlwZVxuXG5cdFx0XHRlbHNlIHJldHVybiBpdGVtXG5cblx0IyMjXG5cdERlZXAgY2xvbmUgb2YgYW4gb2JqZWN0LlxuXHRGcm9tIE1vb1Rvb2xzXG5cdCMjI1xuXHRfY2xvbmVPYmplY3Q6IChvLCBpbmNsdWRlUHJvdG90eXBlID0gZmFsc2UpIC0+XG5cblx0XHRpZiBjb21tb24uaXNCYXJlT2JqZWN0IG9cblxuXHRcdFx0Y2xvbmUgPSB7fVxuXG5cdFx0XHRmb3Iga2V5IG9mIG9cblxuXHRcdFx0XHRjbG9uZVtrZXldID0gY29tbW9uLmNsb25lIG9ba2V5XSwgaW5jbHVkZVByb3RvdHlwZVxuXG5cdFx0XHRyZXR1cm4gY2xvbmVcblxuXHRcdGVsc2VcblxuXHRcdFx0cmV0dXJuIG8gdW5sZXNzIGluY2x1ZGVQcm90b3R5cGVcblxuXHRcdFx0cmV0dXJuIG8gaWYgbyBpbnN0YW5jZW9mIEZ1bmN0aW9uXG5cblx0XHRcdGNsb25lID0gT2JqZWN0LmNyZWF0ZSBvLmNvbnN0cnVjdG9yLnByb3RvdHlwZVxuXG5cdFx0XHRmb3Iga2V5IG9mIG9cblxuXHRcdFx0XHRpZiBvLmhhc093blByb3BlcnR5IGtleVxuXG5cdFx0XHRcdFx0Y2xvbmVba2V5XSA9IGNvbW1vbi5jbG9uZSBvW2tleV0sIGluY2x1ZGVQcm90b3R5cGVcblxuXHRcdFx0Y2xvbmVcblxuXHQjIyNcblx0RGVlcCBjbG9uZSBvZiBhbiBhcnJheS5cblx0RnJvbSBNb29Ub29sc1xuXHQjIyNcblx0X2Nsb25lQXJyYXk6IChhLCBpbmNsdWRlUHJvdG90eXBlID0gZmFsc2UpIC0+XG5cblx0XHRpID0gYS5sZW5ndGhcblxuXHRcdGNsb25lID0gbmV3IEFycmF5IGlcblxuXHRcdHdoaWxlIGktLVxuXG5cdFx0XHRjbG9uZVtpXSA9IGNvbW1vbi5jbG9uZSBhW2ldLCBpbmNsdWRlUHJvdG90eXBlXG5cblx0XHRjbG9uZSJdfQ==